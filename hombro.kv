#:kivy 1.11.1
<PresetButton>:
    size_hint: 0.3, 0.7
    group: 'preset'
    on_press: app.root.preset_clicked(self)


<HomeScreen>:
    preset_btns: preset_btns
    canvas.before:
        Color:
            rgb: 0.11, 0.02, 0.11
        Rectangle:
            size: self.size
            pos: self.pos
    orientation: 'vertical'
    spacing: 10
    ActionBar:
        id: nav_bar
        name: 'Living Room - Led Strip'
        ActionView:
            canvas.before:
                Color:
                    rgb: 0.1, 0, 0.1
                Rectangle:
                    size: self.size
                    pos: self.pos
            use_separator: True
            ActionPrevious:
                title: nav_bar.name
                with_previous: False
            ActionOverflow:
            ActionButton:
                icon: 'icons/settings_icon2.png'
                size_hint: 0.2, 1
                on_press:
                    self.background_color = (0.4, 0.2, 0.4, 1)

    ToggleButton:
        name: 'Ledstrip'
        size_hint: 0.1, 0.1
        pos_hint: {'center_x': 0.5}
        background_normal: 'icons/off_icon.png'
        background_down: 'icons/on_icon.png'
        on_press: root.power_switch(self)

    BoxLayout:
        orientation: 'horizontal'
        padding: 20, 0
        size_hint_y: 0.1
        StackLayout:
            orientation: 'lr-tb'
            id: preset_btns
            active_btn: 'MonoColor'
        Button:
            pos_hint: {'top': 1}
            size_hint: 0.2, 0.7
            text: 'Add Preset'

    BoxLayout:
        orientation: 'horizontal'
        Widget:
        ColorWheel:
            id: col_wheel
            name: 'Ledstrip'
            size_hint: 1, 1
            on_color: root.color_changed(self, self.color[:-1])
        BoxLayout:
            orientation: 'vertical'
            Widget:
                canvas.after:
                    Color:
                        rgb: 0.1, 0.1, 0.1
                    Line:
                        width: 2
                        rectangle: self.x + self.width * 2 / 9, self.y + self.height * 2 / 9, self.width / 1.8, self.height / 2.5
                    Color:
                        rgb: col_wheel.color
                    Rectangle:
                        size: self.width / 2, self.height / 2
                        pos: self.x + self.width / 4, self.y + self.height / 5

            Button:
                size_hint: 0.5, 0.3
                pos_hint: {'center_x': 0.5}
                text: 'Add color to the current preset'
                text_size: self.width, None
                halign: 'center'
                on_press: root.add_color_to_preset(col_wheel.color)
